{"ast":null,"code":"import _slicedToArray from \"/home/manoel/Documentos/workspace/tindev/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/manoel/Documentos/workspace/tindev/frontend/src/pages/Main.js\";\nimport React, { useEffect, useState } from 'react';\n\nconst io = require('socket.io-client');\n\nimport { Link } from 'react-router-dom';\nimport './Main.css';\nimport api from '../services/api';\nimport logo from \"../assets/logo.svg\";\nimport like from \"../assets/like.svg\";\nimport dislike from \"../assets/dislike.svg\";\nimport itsamatch from '../assets/itsamatch.png';\nexport default function Main({\n  match\n}) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        users = _useState2[0],\n        setUsers = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        matchDev = _useState4[0],\n        setMatchDev = _useState4[1];\n\n  useEffect(() => {\n    async function loadUsers() {\n      const response = await api.get('/devs', {\n        headears: {\n          user: match.params.id\n        }\n      });\n      setUsers(response.data);\n    }\n\n    loadUsers();\n  }, [match.params.id]);\n  useEffect(() => {\n    const socket = io('http://localhost:3333', {\n      query: {\n        user: match.params.id\n      }\n    });\n    socket.on('match', dev => {\n      setMatchDev(dev);\n    });\n  }, [match.params.id]);\n\n  async function handleLike(id) {\n    await api.post(\"/devs/\".concat(id, \"/likes\"), null, {\n      headers: {\n        user: match.params.id\n      }\n    });\n    setUsers(users.filter(user => user._id !== id));\n  }\n\n  async function handleDislike(id) {\n    await api.post(\"/devs/\".concat(id, \"/dislikes\"), null, {\n      headers: {\n        user: match.params.id\n      }\n    });\n    setUsers(users.filter(user => user._id !== id));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"main-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: logo,\n    alt: \"Tindev\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  })), users.length > 0 ? React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, users.map(user => React.createElement(\"li\", {\n    key: user._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: user.avatar,\n    alt: user.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }), React.createElement(\"footer\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, user.name), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, user.bio)), React.createElement(\"div\", {\n    className: \"buttons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleDislike(user._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: dislike,\n    alt: \"Dislike\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleLike(user._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: like,\n    alt: \"Like\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  })))))) : React.createElement(\"div\", {\n    className: \"empty\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Acabou :(\"), matchDev && React.createElement(\"div\", {\n    className: \"match-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: itsamatch,\n    alt: \"It's a match\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, matchDev.name), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, matchDev.bio), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setMatchDev(null),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"FECHAR\")));\n}","map":{"version":3,"sources":["/home/manoel/Documentos/workspace/tindev/frontend/src/pages/Main.js"],"names":["React","useEffect","useState","io","require","Link","api","itsamatch","Main","match","users","setUsers","matchDev","setMatchDev","loadUsers","response","get","headears","user","params","id","data","socket","query","on","dev","handleLike","post","headers","filter","_id","handleDislike","logo","length","map","avatar","name","bio","dislike","like"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nconst io = require('socket.io-client');\nimport { Link } from 'react-router-dom';\nimport './Main.css';\nimport api from '../services/api';\nimport logo from '../assets/logo.svg';\nimport like from '../assets/like.svg';\nimport dislike from '../assets/dislike.svg';\nimport itsamatch from '../assets/itsamatch.png';\n\nexport default function Main({ match }) {\n  const [users, setUsers] = useState([]);\n  const [matchDev, setMatchDev] = useState(null);\n\n  useEffect(() => {\n    async function loadUsers(){\n      const response = await api.get('/devs', {\n        headears: {\n          user: match.params.id,\n        }\n      })\n      setUsers(response.data);\n    }\n    loadUsers();\n  }, [match.params.id]);\n\n  useEffect(() => {\n    const socket = io('http://localhost:3333', {\n      query: { user: match.params.id }\n    });\n    socket.on('match', dev => {\n      setMatchDev(dev);\n    })\n  }, [match.params.id]);\n\n  async function handleLike(id) {\n    await api.post(`/devs/${id}/likes`, null, {\n      headers: { user:match.params.id },\n    })\n    setUsers(users.filter(user => user._id !== id));\n  }\n\n  async function handleDislike(id) {\n    await api.post(`/devs/${id}/dislikes`, null, {\n      headers: { user:match.params.id },\n    })\n    setUsers(users.filter(user => user._id !== id));\n  }\n  return (\n    <div className=\"main-container\">\n      <Link to=\"/\">\n\n      <img src={logo} alt=\"Tindev\"/>\n      </Link>\n       { users.length > 0 ? (\n      <ul>\n         {users.map(user => (\n          <li key={user._id}>\n          <img src={user.avatar} alt={user.name}/>\n          <footer>\n            <strong>{user.name}</strong>\n            <p>{user.bio}</p>\n          </footer>\n\n          <div className=\"buttons\">\n            <button type=\"button\" onClick={() => handleDislike(user._id)}>\n              <img src={dislike} alt=\"Dislike\"/>\n            </button>\n            <button type=\"button\" onClick={() => handleLike(user._id)}>\n              <img src={like} alt=\"Like\"/>\n            </button>\n          </div>\n        </li>\n        ))}\n      </ul>\n       ) : (\n         <div className=\"empty\">Acabou :(</div>\n       )}\n\n       { matchDev && (\n         <div className=\"match-container\">\n           <img src={itsamatch} alt=\"It's a match\" />\n           <strong>{matchDev.name}</strong>\n           <p>{matchDev.bio}</p>\n\n           <button type=\"button\" onClick={() => setMatchDev(null)}>FECHAR</button>\n         </div>\n       )}\n\n\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}